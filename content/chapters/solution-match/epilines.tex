\subsection{Closest to epiline}
\label{sec:match:epiline}

As described in section~\ref{sec:backgr:stereo:epilines}, a specific point in a camera will be seen on a specific epiline on another camera.

In traditional stereoscopy, the epiline is a set of discrete pixels, while in our case it's a continuous line of floating-point values.
On top of that, the many pixels of each bubble in the image get compressed into a single point, without size.
Due to these two factors, it is impossible to have a bubble perfectly on top of the epiline: instead, the match is selected as the closest bubble to the epiline, provided that the distance is under a reasonable threshold.

This is one of the approaches originally used in the MATLAB script provided by the research group.
It was considered as a candidate algorithm, and as such it was re-implemented in Python for easier comparison.

\subsubsection{Algorithm}

Chosen a ``main'' camera, the algorithm processes each other camera with the following steps:
\begin{enumerate}
	\itemsep 0em
	\item For each bubble in the main camera:
	      \begin{enumerate}
		      \item Compute the coefficients $a$, $b$ and $c$ of the epiline $ax+by+c{=}0$;
		      \item Compute the distance (with a scale factor) of all bubbles $(x_i, y_i)$ in the side camera from the epiline: $d_i = ax_i + by_i + c$;
		      \item Select as candidate match the bubble with $d=min_i(d_i)$;
		      \item Compare $d$ with the reasonability threshold $T$:
		            \begin{itemize}
			            \item If $d<T$, consider the bubble as a valid match;
			            \item Otherwise, consider the original bubble as unmatched.
		            \end{itemize}
	      \end{enumerate}
\end{enumerate}

\subsubsection{Evaluation}

The algorithm had excellent speed, running at 300 FPS, which is 10x faster than the requirements.
While the quality looked quite good with the smaller dataset (with 28/0/2 correct/missed/wrong matches), the performance was much worse with more bubbles (51/4/45).
As such, there was space for improvement, trading some of the useless speed with better quality.
In fact, a possible improvement could be to have some more data to describe the bubbles: the match could be chosen as the bubble with the most similar description, among those close to the epiline.
